name: my-site
region: fra
services:
    - name: app
      dockerfile_path: Dockerfile
      source_dir: /
      github:
          branch: frontend_mega_hardcore
          # Deploy a new version on every commit
          # deploy_on_push: true
          repo: phantie/api_aga_in
      # Active probe used by DigitalOcean's to ensure our application is healthy
      health_check:
          http_path: /api/health_check
      # The port the application will be listening on for incoming requests
      # It should match what we specified in our configuration/production.yaml file!
      http_port: 8000
      instance_count: 1
      instance_size_slug: basic-xxs
      # All incoming requests should be routed to our app
      routes:
          - path: /
      envs:
          # We use DO's APP_URL to inject the dynamically
          # provisioned base url as an environment variable
          - key: APP__APPLICATION__BASE_URL
            scope: RUN_TIME
            value: ${APP_URL}
          - key: APP__EMAIL_CLIENT__AUTHORIZATION_TOKEN
            scope: RUN_TIME
            # FAKE VALUE until I figure out a better way
            value: 6709685d-4dae-4a9c-aed5-9b6802c949b5
            type: SECRET